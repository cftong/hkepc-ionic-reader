<ion-view >
  <ion-nav-title>
    <i class="ion-ios-star"> 我的最愛</i>
  </ion-nav-title>
  <ion-nav-buttons side="right" style="float:right">
    <a class="button button-icon icon ion-ios-plus-empty" ng-click="vm.onQuickReply(vm.post)"></a>
    <a class="button button-icon icon ion-ios-refresh-empty" ng-click="vm.doRefresh()"></a>
  </ion-nav-buttons>
  <ion-content lazy-scroll class="padding" on-swipe-right="$ionicGoBack()"  style="background-color:#f5f5f5">
    <div style="text-align:center">
      <label class="item item-input" style="width:100%">
        <i class="icon ion-search placeholder-icon"></i>
        <input placeholder="搜尋..." type="text" ng-model="vm.searchText" ng-change="vm.searchOnTextChange()">
      </label>
    </div>
    <div class="spinner">
      <ion-spinner class="spinner-balanced" icon="ripple" ng-show="vm.messages.length == 0"></ion-spinner>
    </div>
    <div class="list card" ng-repeat="message in vm.messages track by $index">

      <div class="item item-avatar">
        <img image-lazy-src="{{::message.author.image}}" image-lazy-distance-from-bottom-to-load="400">
        <i class="ion-ios-arrow-down" style="float:right;"></i>

        <h2 ng-bind="::message.author.name"></h2>
        <p>{{::message.createdAt}} <span style="float:right">#{{::message.pos}}</span></p>
      </div>

      <div class="item item-body" compile="::message.content">
      </div>

    </div>
    <ion-infinite-scroll
        class="ispinner"
        ng-if="vm.hasMoreData()"
        style="text-align: center;"
        on-infinite="vm.loadMore()"
        spinner="ripple"
        immediate-check="false"
        distance="7%">
    </ion-infinite-scroll>
    <div style="text-align:center" ng-show="vm.end">
      <h4 class="title">完</h4>
    </div>
  </ion-content>
</ion-view>

