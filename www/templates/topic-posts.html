<ion-view view-title="{{vm.topic.name}}">
  <ion-content>
    <ion-refresher
        pulling-text="拖下重新整理..."
        on-refresh="vm.doRefresh()">
    </ion-refresher>
    <div class="spinner">
      <ion-spinner class="spinner-balanced" icon="android" ng-show="vm.pages.length == 0"></ion-spinner>
    </div>
    <ion-list ng-repeat="page in vm.pages">
      <div class="item item-divider">
        第 {{::page.num}} 頁
      </div>
      <ion-item
          ng-class-odd="'odd'" ng-class-even="'even'"
          class="item-remove-animate item-icon-right item-text-wrap"
          ng-repeat="post in page.posts"
          type="item-text-wrap"
          href="#/tab/topics/{{::topic.id}}/posts/{{::post.id}}/page/1">
        <h2 class="bigger-title">{{::post.name}}</h2>
        <div>
          <small style="color:#aaa">{{::post.publishDate}} @ {{::post.author.name}}</small>
          <small style="float:right;color:#aaa">{{::post.count.reply}} / {{::post.count.view}}</small>
        </div>
        <div>
          <a ng-show="::post.tag"><small>#{{::post.tag}}</small></a>
        </div>

        <i class="icon ion-chevron-right icon-accessory"></i>
      </ion-item>
    </ion-list>
    <ion-infinite-scroll
        class="ispinner"
        style="text-align: center;"
        on-infinite="vm.loadMore()"
        spinner="android"
        immediate-check="false"
        distance="1%">
    </ion-infinite-scroll>
  </ion-content>
</ion-view>